<!doctype html>
<html lang="en">

<head>
  <title>Analytics Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <div class="container mt-5">
    <h1>Analytics Dashboard</h1> 
    
    <div class="mt-4">
      <h2>Number of Inputs per Platform</h2>
      <iframe src="{{ url_for('static_files', filename='platform_inputs.html') }}" width="100%" height="600"></iframe>
    </div> 

    <div class="mt-4">
      <h2>Number of Requests per Day</h2>
      <iframe src="{{ url_for('static_files', filename='requests_per_day.html') }}" width="100%" height="600"></iframe>
    </div>

    <div class="mt-4">
      <h2>Number of Requests per Month</h2>
      <iframe src="{{ url_for('static_files', filename='requests_per_month.html') }}" width="100%" height="600"></iframe>
    </div>

    <div class="mt-4">
      <h2>Most Common Topics</h2>
      <iframe src="{{ url_for('static_files', filename='common_topics.html') }}" width="100%" height="600"></iframe>
    </div>

    <div class="mt-4">
      <h2>Filtered Titles with Keyword 'Python'</h2>
      <iframe src="{{ url_for('static_files', filename='filtered_titles_python.html') }}" width="100%" height="600"></iframe>
    </div>

    <div class="mt-4">
      <h2>Filter Titles by Keyword</h2>
      <form method="post" action="/filter">
        <div class="mb-3">
          <label for="keyword" class="form-label">Enter Keyword</label>
          <input type="text" class="form-control" id="keyword" name="keyword" required>
        </div>
        <button type="submit" class="btn btn-primary">Filter Titles</button>
      </form>
    </div>


    
<div class="mt-4">
    <h2>Filter Titles by Keyword</h2>
    <form id="searchForm">
      <div class="mb-3">
        <label for="searchKeyword" class="form-label">Search Keyword</label>
        <input type="text" class="form-control" id="searchKeyword" name="searchKeyword" placeholder="Enter Keyword">
      </div>
    </form>
  
    <div id="filteredResults" class="mt-4"></div>
  </div>


  </div>



<script>
    document.addEventListener('DOMContentLoaded', function() {
      const searchForm = document.getElementById('searchForm');
      const searchKeywordInput = document.getElementById('searchKeyword');
      const filteredResults = document.getElementById('filteredResults');
  
      searchForm.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form submission
        const keyword = searchKeywordInput.value.trim().toLowerCase();
        if (keyword.length === 0) {
          filteredResults.innerHTML = ''; // Clear previous results if keyword is empty
          return;
        }
        fetch('/filter', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: new URLSearchParams({
            keyword: keyword,
          }),
        })
        .then(response => response.text())
        .then(html => {
          filteredResults.innerHTML = html; // Update filtered results container with fetched HTML
        })
        .catch(error => {
          console.error('Error fetching filtered results:', error);
        });
      });
  
      searchKeywordInput.addEventListener('input', function() {
        // Trigger search form submission when user types in the input
        searchForm.dispatchEvent(new Event('submit'));
      });
    });
  </script>


</body>

</html>
